@{

    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>登录</title>
    <link href="~/css/animate.css" rel="stylesheet" />
    <link href="~/css/bootstrap.css" rel="stylesheet" />
    <link href="~/css/denglustyle.css" rel="stylesheet" />
</head>
<body>

    <div class="gtco-loader"></div>

    <div id="page"></div>

    <div class="page-inner"></div>

    <header id="gtco-header" class="gtco-cover" role="banner" style="background-image: url(../../images/登录背景.jpg);height:100vh;">
        <div class="overlay"></div>
        <div class="gtco-container">
            <div class="row">
                <div class="col-md-12 col-md-offset-0 text-left">

                    <div class="row row-mt-15em">
                        <div class="col-md-7 mt-text animate-box" data-animate-effect="fadeInUp">
                            <span class="intro-text-small">销售系统</span>
                            <h1>易特进销</h1>
                        </div>
                        <div class="col-md-4 col-md-push-1 animate-box" data-animate-effect="fadeInRight">
                            <div class="form-wrap">
                                <div class="tab">
                                    <ul class="tab-menu">
                                        <li class="active gtco-first"><a href="#" data-tab="signup"> 注 册 </a></li>
                                        <li class="gtco-second"><a href="#" data-tab="login"> 登 录 </a></li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-content-inner active" id="first" data-content="signup">
                                            <form action="#">
                                                <div class="row form-group">
                                                    <div class="col-md-12">
                                                        <label for="Uname">登录名</label>
                                                        <input type="text" data-container="body" data-toggle="popover" data-placement="right" data-content="请输入登录名" class="form-control" id="Uname">
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="col-md-12">
                                                        <label for="Ucall">用户名</label>
                                                        <input type="text" data-container="body" data-toggle="popover" data-placement="right" data-content="请输入用户名" class="form-control" id="Ucall">
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="col-md-12">
                                                        <label for="Upwd">密码</label>
                                                        <input type="password" data-container="body" data-toggle="popover" data-placement="right" data-content="请输入密码" class="form-control" id="Upwd">
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="col-md-12">
                                                        <label for="Upwd2">确认密码</label>
                                                        <input type="password" data-container="body" data-toggle="popover" data-placement="right" data-content="请输入确认密码" class="form-control" id="Upwd2">
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="col-md-12">
                                                        <input type="button" id="UAddbtn" class="btn btn-primary" value="注 册">
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="tab-content-inner" id="second" data-content="login">
                                            <form action="#">
                                                <div class="row form-group">
                                                    <div class="col-md-12">
                                                        <label for="LUname">登录名</label>
                                                        <input type="text" class="form-control" data-container="body" data-toggle="popover" data-placement="right" data-content="登录名不能为空" id="LUname">
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="col-md-12">
                                                        <label for="UpwdL">密码</label>
                                                        <input type="password" class="form-control" data-container="body" data-toggle="popover" data-placement="right" data-content="密码不能为空" id="LUpwd">
                                                    </div>
                                                </div>
                                                <div class="row form-group">
                                                    <div class="col-md-12">
                                                        <input type="button" id="Lgbtn" class="btn btn-primary" value="登 录" />
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>


    <div class="gototop js-top">
        <a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
    </div>
    <script src="~/js/jquery-3.2.1.min.js"></script>
    <script src="~/js/jquery.min.js"></script>
    <script src="~/js/jquery.easing.1.3.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/jquery.waypoints.min.js"></script>
    <script src="~/js/owl.carousel.min.js"></script>
    <script src="~/js/jquery.magnific-popup.min.js"></script>
    <script src="~/js/magnific-popup-options.js"></script>
    <script src="~/js/main.js"></script>

    <script type="text/javascript">
        $(function () {
            $("#LUname").click(function () {
                $("#LUname").popover("destroy");
            });
            $("#LUpwd").click(function () {
                $("#LUpwd").popover("destroy");
            });
            $("#Lgbtn").click(function () {
                var Uname = $("#LUname").val();
                var Upwd = $("#LUpwd").val();

                if (Uname == null || Uname == "") {
                    $("#LUname").popover("show");
                    $("#LUname").focus();
                    return;
                }

                if (Upwd == null || Upwd == "") {
                    $("#LUpwd").popover("show");
                    $("#LUpwd").focus();
                    return;
                }
                $.ajax({
                    type: "post",
                    url: "http://localhost:19992/api/Login",
                    contentType: "application/json",
                    data: JSON.stringify({ Uname: Uname, Upwd: Upwd }),
                    dataType: "json",
                    xhrFields: {
                        withCredentials: true //请求时带上cookie,只有带上cookie才能记录自己的会话ID
                    },
                    success: function (rs) {
                        if (rs) {
                            alert("登录成功!");
                            setInterval("location.href='/Home/Index'", 1000);

                        } else {
                            alert("登录名或密码错误!");
                        }
                    }
                });
            });
            $("#Uname").click(function () {
                $("#Uname").popover("destroy");
            });
            $("#Upwd").click(function () {
                $("#Upwd").popover("destroy");
            });
            $("#Ucall").click(function () {
                $("#Ucall").popover("destroy");
            });
            $("#UAddbtn").click(function () {
                var Uname = $("#Uname").val();
                var Upwd = $("#Upwd").val();
                var Upwd2 = $("#Upwd2").val();
                var Ucall = $("#Ucall").val();
                if (Uname == "" || Uname == null) {
                    $("#Uname").attr("data-content", "请输入登录名");
                    $("#Uname").popover("show");
                    $("#Uname").focus();
                    return;
                }
                if (Uname.length < 4 || Uname.length > 12) {
                    $("#Uname").attr("data-content", "登录名长度必须大于4且少于12");
                    $("#Uname").popover("show");
                    $("#Uname").focus();
                    return;
                }
                if (Ucall == "" || Ucall == null) {
                    $("#Ucall").popover("show");
                    $("#Ucall").focus();
                    return;
                }
                if (Upwd == "" || Upwd == null) {
                    $("#Upwd").attr("data-content", "请输入密码");
                    $("#Upwd").popover("show");
                    $("#Upwd").focus();
                    return;
                }
                if (Upwd.length < 6 || Upwd.length > 16) {
                    $("#Upwd").attr("data-content", "密码的长度必须大于6且小于16");
                    $("#Upwd").popover("show");
                    $("#Upwd").focus();
                    return;
                }
                if (!(/[a-zA-Z]+/).test(Upwd)) {
                    $("#Upwd").attr("data-content", "密码中至少包含一个字母");
                    $("#Upwd").popover("show");
                    $("#Upwd").focus();
                    return;
                }
                if (Upwd2 == "" || Upwd2 == null) {
                    $("#Upwd2").attr("data-content", "请输入确认密码");
                    $("#Upwd2").popover("show");
                    $("#Upwd2").focus();
                    return;
                }
                if (Upwd != Upwd2) {
                    $("#Upwd2").attr("data-content", "确认密码不一致");
                    $("#Upwd2").popover("show");
                    return;
                }
                var u = {
                    Uname: Uname, Upwd: Upwd, Ucall: Ucall
                }
                $.get("http://localhost:19992/api/User", { Uname: Uname }, function (rs) {
                    if (rs) {
                        alert("该登录名已存在");
                    } else {
                        $.post("http://localhost:19992/api/User", u, function (rs) {
                            if (rs == 1) {
                                alert("注册成功");
                                setInterval(function () {
                                    $(".gtco-first").removeClass("active");
                                    $(".gtco-second").addClass("active");
                                    $("#first").removeClass("active");
                                    $("#second").addClass("active");
                                    $("#LUname").val(Uname);

                                }, 1000);
                            } else {
                                alert("注册失败");
                            }
                        })
                    }
                });
            })

        })//gtco-first   gtco-second  active
        ////获取session值
        //$.ajax({
        //    type: "get",
        //    url: "http://localhost:19992/api/Login",
        //    data: "",
        //    dataType: "json",
        //    xhrFields: {
        //        withCredentials: true //请求时带上cookie,只有带上cookie才能记录自己的会话ID
        //    },
        //    success: function (rs) {
        //        alert(rs);
        //    }
        //});
        //function fun() {
        //    window.location.href = "../Home/Index";
        //}
    </script>
</body>
</html>
